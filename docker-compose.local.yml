version: '3.8'

services:
    back:
        build: .
#        command: gunicorn --bind back:8000 run:app
        expose:
            - "8000"
            - "5000"
        ports:
            -   "8000:8000"
            -   "587:587"
#        environment:
#            - TOKEN=${TOKEN}
#            - DATABASE_URL=${DATABASE_URL}
#            - MAIL_PASSWORD=${MAIL_PASSWORD}
#            - MAIL_SERVER=${MAIL_SERVER}
#            - MAIL_PORT=${MAIL_PORT}
#            - MAIL_USE_TLS=${MAIL_USE_TLS}
#            - MAIL_USERNAME=${MAIL_USERNAME}
#            - MAIL_DEFAULT_SENDER=${MAIL_DEFAULT_SENDER}
#            - EMAIL_PROCHARRITY=${EMAIL_PROCHARRITY}
#            - HOST_NAME=${HOST_NAME}
#            - TOKEN_FOR_WEBHOOKS=${TOKEN_FOR_WEBHOOKS}
        env_file:
            -   .env

    front:
        build: front/
        env_file:
            -   front/.env
        ports:
            -    "80:80"
    db:
        image: postgres:12-alpine
        volumes:
            -   postgres_data:/var/lib/postgresql/data
#        environment:
#            - POSTGRES_USER=procharity
#            - POSTGRES_PASSWORD=procharity
#            - POSTGRES_DB=procharity_local_test_db
        expose:
            - "5432"
        ports:
            - "9999:5432"
        env_file:
            -   .env

volumes:
    postgres_data:
